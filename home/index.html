<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>伤害计算器（新版）</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        fieldset { margin-bottom: 15px; }
        label { display: inline-block; width: 220px; }
        input { margin-bottom: 5px; }
        .magnification-item { margin-bottom: 10px; }
        hr { margin: 10px 0; }
        pre { background: #f4f4f4; padding: 10px; }
    </style>
</head>
<body>
<h1>伤害计算器（新版）</h1>
<form id="calculatorForm">
    <!-- 基础参数 -->
    <fieldset>
        <legend>Basic 参数</legend>
        <label>基础攻击力: <input type="number" step="any" name="basicAttack" value="1642"></label><br>
        <label>基础暴击: <input type="number" step="any" name="basicCritical" value="43.4"></label><br>
        <label>基础爆伤: <input type="number" step="any" name="basicExplosiveInjury" value="98"></label><br>
        <label>基础增伤: <input type="number" step="any" name="basicIncreasedDamage" value="15"></label><br>
        <label>基础减抗: <input type="number" step="any" name="basicReductionResistance" value="0"></label><br>
        <label>基础易伤: <input type="number" step="any" name="basicVulnerable" value="0"></label><br>
        <label>基础特殊增伤: <input type="number" step="any" name="basicSpecialDamage" value="0"></label><br>
    </fieldset>

    <!-- 增益参数 -->
    <fieldset>
        <legend>Gain 参数</legend>
        <label>攻击力增加: <input type="number" step="any" name="attackValue" value="1516"></label><br>
        <label>攻击力百分比: <input type="number" step="any" name="attackPowerPercentage" value="30"></label><br>
        <label>局内攻击力百分比: <input type="number" step="any" name="attackInternalPercentage" value="37"></label><br>
        <label>增暴: <input type="number" step="any" name="gainCritical" value="25"></label><br>
        <label>增爆伤: <input type="number" step="any" name="gainExplosiveInjury" value="75"></label><br>
        <label>增增伤: <input type="number" step="any" name="gainIncreasedDamage" value="44"></label><br>
        <label>增减抗: <input type="number" step="any" name="gainReductionResistance" value="0"></label><br>
        <label>增易伤: <input type="number" step="any" name="gainVulnerable" value="25"></label><br>
        <label>增特殊增伤: <input type="number" step="any" name="gainSpecialDamage" value="0"></label><br>
    </fieldset>

    <!-- 防御参数 -->
    <fieldset>
        <legend>Defense 参数</legend>
        <label>穿透率: <input type="number" step="any" name="penetration" value="0"></label><br>
        <label>破防百分比: <input type="number" step="any" name="defenseBreak" value="0"></label><br>
        <label>穿透值: <input type="number" step="any" name="penetrationValue" value="0"></label><br>
    </fieldset>

    <!-- 条件参数 -->
    <fieldset>
        <legend>Condition 参数</legend>
        <label>有效主词条数: <input type="number" step="any" name="mainArticle" value="44"></label><br>
        <label>暴击阈值: <input type="number" step="any" name="conditionCritical" value="95"></label><br>
    </fieldset>

    <!-- 伤害倍率参数（数组） -->
    <fieldset>
        <legend>Magnifications 参数（可增删）</legend>
        <div id="magnifications">
            <!-- 动态添加每项 -->
        </div>
        <button type="button" onclick="addMagnification()">添加一项</button>
    </fieldset>

    <button type="button" onclick="runCalculation()">一键运行计算</button>
</form>

<hr>
<div id="result"><pre id="logOutput"></pre></div>

<!-- 引入外部JS文件 -->
<script src="./logical_layer/initialization.js"></script>
<script src="./logical_layer/damageCalculation.js"></script>
<script src="./logical_layer/attributeCalculation.js"></script>
</body>
</html>
